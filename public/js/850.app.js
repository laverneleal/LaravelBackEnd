(self.webpackChunk=self.webpackChunk||[]).push([[850],{4789:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const a={props:["loadingDialog","items"],data:function(){return{}},mounted:function(){},methods:{}};const i=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{persistent:"",persistent:"",width:"350"},model:{value:e.loadingDialog,callback:function(t){e.loadingDialog=t},expression:"loadingDialog"}},[n("v-card",{attrs:{color:"primary",dark:""}},[n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",[e._v("Processing")])],1)],1),e._v(" "),n("v-card-text",[e._v("\n       "+e._s(e.items)+"\n       "),n("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)}),[],!1,null,null,null).exports},6850:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var a=n(7757),i=n.n(a),o=(n(9669),n(4789)),r=n(8475);function l(e,t,n,a,i,o,r){try{var l=e[o](r),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(a,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){l(o,a,i,r,s,"next",e)}function s(e){l(o,a,i,r,s,"throw",e)}r(void 0)}))}}const c={name:"Login",components:{loading:o.Z},data:function(){return{loadingDialog:!1,loadingItem:"",menu:!1,input:{email:"",password:""},verify:"",dialog:!1,loginDialog:!0}},methods:{changeUser:function(e){r.$.$emit("changeUser",e)},login:function(){var e=this;return s(i().mark((function t(){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$UserInfo.logInUser(e.input.email,e.input.password);case 3:return n=t.sent,t.next=6,e.showDialog();case 6:return t.next=8,e.$ContentProvider.getSRSGaibuListItemsFromAPI();case 8:return t.next=10,e.$ContentProvider.getSRSHouseTypesFromAPI();case 10:e.$UserInfo.logInUser(e.input.email,e.input.password),e.changeUser("Welcome  ".concat(n.data.full_name.split(",")[1].split(" ")[1],"!")),e.$router.push("/menu"),t.next=19;break;case 13:t.prev=13,t.t0=t.catch(0),e.verify="Invalid login credentials, please login again",e.dialog=!0,e.loadingDialog=!1,location.replace("/login");case 19:case"end":return t.stop()}}),t,null,[[0,13]])})))()},showDialog:function(){var e=this;return s(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.loginDialog=!1,e.loadingDialog=!0;case 2:case"end":return t.stop()}}),t)})))()}},mounted:function(){localStorage.removeItem("SRS")}};const u=(0,n(1900).Z)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-dialog",{staticClass:"elevation-12",attrs:{persistent:"","max-width":"400"},model:{value:e.loginDialog,callback:function(t){e.loginDialog=t},expression:"loginDialog"}},[n("v-card",[n("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[n("v-card-title",{staticClass:"headline"},[e._v("User Login")])],1),e._v(" "),n("v-card-text",[n("v-form",[n("v-text-field",{attrs:{label:"User",name:"login","prepend-icon":"mdi-account",type:"text"},model:{value:e.input.email,callback:function(t){e.$set(e.input,"email",t)},expression:"input.email"}}),e._v(" "),n("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"lock",type:"password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.input.password,callback:function(t){e.$set(e.input,"password",t)},expression:"input.password"}})],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"primary",dark:""},on:{click:function(t){return e.login()}}},[e._v("Login")])],1)],1)],1),e._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Login Error")]),e._v(" "),n("v-card-text",[e._v(" "+e._s(e.verify)+" ")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("OK")])],1)],1)],1),e._v(" "),n("loading",{attrs:{loadingDialog:e.loadingDialog,items:"Loading textures from api"}})],1)}),[],!1,null,null,null).exports}}]);