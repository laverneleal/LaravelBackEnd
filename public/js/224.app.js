(self.webpackChunk=self.webpackChunk||[]).push([[224,944],{8622:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(3645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,".input[data-v-8b29960c]{border:1px solid grey;border-radius:4px;font-size:15px;height:55px;width:100%}.arial[data-v-8b29960c]{font-family:Arial,Helvetica,sans-serif}",""]);const a=o},1224:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var r=n(7757),o=n.n(r),a=(n(4944),n(4789)),s=n(629),i=n(8475);function l(e,t,n,r,o,a,s){try{var i=e[a](s),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){l(a,r,o,s,i,"next",e)}function i(e){l(a,r,o,s,i,"throw",e)}s(void 0)}))}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m={name:"Existing",components:{loading:a.Z},data:function(){return{loadingDialog:!1,dialog:!0,constructionCode:"",planNumber:"",requestNumber:"",planNumbers:[],requestNumbers:[],houseType:"",isCompleteDetails:!1,dialogTitle:"Revision Plan"}},computed:d(d({},(0,s.nv)(["savePlanInfo","isPrevious"])),(0,s.rn)(["PlanInfo"])),watch:{loadingDialog:function(e){e&&setTimeout((function(){return i.$.$emit("changeIt","外部 シート-")}),9e3)}},mounted:function(){},methods:{showDialog:function(){var e=this;return c(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dialog=!1,e.loadingDialog=!0;case 2:case"end":return t.stop()}}),t)})))()},sameConstructionCodes:function(e){var t=this;return c(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.planNumbers=[],n.prev=1,n.next=4,t.$PlanData.getSameConstructionCodes(e);case 4:t.planNumbers=n.sent,n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),console.log("Please Input Plan Number");case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()},getRequestNumber:function(){var e=this;this.requestNumbers=[],this.planNumbers.forEach((function(t){t.plan_no==e.planNumber&&(e.requestNumbers.push(t.shio_no),e.houseType=t.house_type)})),this.enableButtons()},enableButtons:function(){""!=this.constructionCode&&""!=this.planNumber&&(this.isCompleteDetails=!0)},getPlanInfoDataFromPrevious:function(){var e=this;return c(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.PlanInfo.isPrevious){t.next=9;break}return t.prev=1,t.next=4,e.$store.dispatch("savePlanInfo",{ConstructionCode:e.constructionCode,RevisionNumber:e.planNumber,RequestNumber:e.requestNumber,HouseType:e.houseType});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0);case 9:return t.prev=9,n=e.constructionCode+e.planNumber+e.requestNumber+e.houseType,t.next=13,axios.get("".concat("","/api/getPlansInfo/").concat(n));case 13:return r=t.sent,t.next=16,e.showDialog();case 16:return t.next=18,e.$store.dispatch("selectedItemsPrevious",r.data.SelectedItems.filter((function(e){return null!=e})));case 18:return t.next=20,e.$store.dispatch("hiddenItemsPrevious",r.data.HiddenItemIndex);case 20:t.next=25;break;case 22:t.prev=22,t.t1=t.catch(9),console.log(t.t1);case 25:case"end":return t.stop()}}),t,null,[[1,6],[9,22]])})))()}}};var v=n(3379),f=n.n(v),h=n(8622),b={insert:"head",singleton:!1};f()(h.Z,b);h.Z.locals;const g=(0,n(1900).Z)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",{staticClass:"elevation-6"},[n("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[n("v-toolbar-title",{staticClass:"arial"},[e._v(e._s(e.dialogTitle))])],1),e._v(" "),n("v-card-text",{staticClass:"pt-4"},[n("div",{staticClass:"pb-7"},[n("the-mask",{staticClass:"input pl-2",attrs:{id:"maskEdit",name:"constructionCode",placeholder:"お客様コード",mask:"XXXXXXX-####",type:"text",masked:""},model:{value:e.constructionCode,callback:function(t){e.constructionCode=t},expression:"constructionCode"}})],1),e._v(" "),n("v-select",{attrs:{name:"planNumber",items:e.planNumbers,"item-text":"plan_no","item-value":"plan_no",label:"図面番号",outlined:""},on:{click:function(t){return e.sameConstructionCodes(e.constructionCode)}},model:{value:e.planNumber,callback:function(t){e.planNumber=t},expression:"planNumber"}}),e._v(" "),n("v-select",{attrs:{name:"requestNumber",items:e.requestNumbers,"item-text":"shio_no","item-value":"shio_no",label:"仕様書番号",outlined:""},on:{click:function(t){return e.getRequestNumber()}},model:{value:e.requestNumber,callback:function(t){e.requestNumber=t},expression:"requestNumber"}}),e._v(" "),n("v-text-field",{attrs:{name:"houseType",placeholder:"家タイプ",readonly:"",outlined:""},model:{value:e.houseType,callback:function(t){e.houseType=t},expression:"houseType"}})],1),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!e.isCompleteDetails},on:{click:function(t){return e.getPlanInfoDataFromPrevious()}}},[e._v("新規登録 \n        ")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1,e.$router.push("menu").catch((function(){}))}}},[e._v("Close\n        ")])],1)],1)],1),e._v(" "),n("loading",{attrs:{loadingDialog:e.loadingDialog,items:"Loading Previous Plan Info"}})],1)}),[],!1,null,"8b29960c",null).exports},4789:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const r={props:["loadingDialog","items"],data:function(){return{}},mounted:function(){},methods:{}};const o=(0,n(1900).Z)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{persistent:"",persistent:"",width:"350"},model:{value:e.loadingDialog,callback:function(t){e.loadingDialog=t},expression:"loadingDialog"}},[n("v-card",{attrs:{color:"primary",dark:""}},[n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",[e._v("Processing")])],1)],1),e._v(" "),n("v-card-text",[e._v("\n       "+e._s(e.items)+"\n       "),n("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)}),[],!1,null,null,null).exports},4944:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(8475);const o={data:function(){return{menuDialog:!0,items:[{color:"primary",src:"../..".concat("","/images/newplan.webp"),title:"New Plan"},{color:"primary",src:"../..".concat("","/images/existingplan.webp"),title:"Revision Plan"},{color:"primary",src:"../..".concat("","/images/logout.webp"),title:"Log Out"}]}},mounted:function(){this.isDrawerHidden(!1)},methods:{isDrawerHidden:function(e){r.$.$emit("hideDrawer",e)},getDialog:function(e){switch(e){case 0:this.$router.push("newplan");break;case 1:this.$store.dispatch("isPrevious",!0),this.$router.push("existing");break;case 2:this.$UserInfo.logOutUser(),this.$router.push("Login")}}}};const a=(0,n(1900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:e.menuDialog,callback:function(t){e.menuDialog=t},expression:"menuDialog"}},[n("v-card",{staticClass:"mx-auto",attrs:{"max-width":"400"}},[n("v-container",[n("v-row",{attrs:{dense:""}},e._l(e.items,(function(t,r){return n("v-col",{key:r,attrs:{cols:"12"}},[n("v-card",{attrs:{color:t.color,dark:""},on:{click:function(t){return e.getDialog(r)}}},[n("div",{staticClass:"d-flex flex-no-wrap justify-space-between"},[n("div",[n("v-card-title",{staticClass:"headline",domProps:{textContent:e._s(t.title)}})],1),e._v(" "),n("v-avatar",{staticClass:"ma-2",attrs:{width:"30%",height:"30%",tile:""}},[n("v-img",{attrs:{src:t.src}})],1)],1)])],1)})),1)],1)],1)],1)}),[],!1,null,null,null).exports}}]);